{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart-js.js"],"sourcesContent":["const KEY = 'cartItems';\n\nconst cartConteiner = document.querySelector('.js-cart');\ncartConteiner.addEventListener('click', handlerClickPlus);\n\nfunction handlerClickPlus(e) {\n  const button = e.target.closest('.item-plus');\n  if (!button) {\n    return;\n  }\n  // <li class=\"cart-order-item\" data-id=\"id_product\"></li>\n  const itemId = e.target.closest('.cart-order-item').dataset.id;\n  const updateCartItems = loadStorage(KEY);\n  const idx = updateCartItems.findIndex(element => element.id === itemId);\n  updateCartItems[idx].quantity += 1;\n  //шлях до спану\n  el.textContent = updateCartItems[idx].quantity;\n  //змінити контент елемента відображення к-ті товару\n  saveStorage(KEY, updateCartItems);\n}\n\nfunction handlerClickMinus(e) {\n  const button = e.target.closest('.item-minus');\n  if (!button) {\n    return;\n  }\n  // <li class=\"cart-order-item\" data-id=\"id_product\"></li>\n  const itemId = e.target.closest('.cart-order-item').dataset.id;\n  const updateCartItems = loadStorage(KEY);\n  const idx = updateCartItems.findIndex(element => element.id === itemId);\n  if (updateCartItems[idx].quantity === 0) {\n    return;\n  } else {\n    updateCartItems[idx].quantity -= 1;\n    //шлях до спану\n    el.textContent = updateCartItems[idx].quantity;\n  }\n  //змінити контент елемента відображення к-ті товару\n  saveStorage(KEY, updateCartItems);\n}\n\nconst saveStorage = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const loadStorage = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nfunction changeCounter() {\n  const counter = document.querySelector('.header__js_span');\n\n  if (!loadStorage(KEY)) {\n    counter.textContent = `CART (${0})`;\n  } else {\n    counter.textContent = `CART (${loadStorage(KEY).length})`;\n  }\n}\n\n//зміна к-ті продуктів в хідері при завантаженні вікна\nwindow.addEventListener('load', changeCounter);\n"],"names":["KEY","cartConteiner","handlerClickPlus","e","itemId","updateCartItems","loadStorage","idx","element","saveStorage","key","value","serializedState","error","changeCounter","counter"],"mappings":"wEAAA,MAAMA,EAAM,YAENC,EAAgB,SAAS,cAAc,UAAU,EACvDA,EAAc,iBAAiB,QAASC,CAAgB,EAExD,SAASA,EAAiBC,EAAG,CAE3B,GAAI,CADWA,EAAE,OAAO,QAAQ,YAAY,EAE1C,OAGF,MAAMC,EAASD,EAAE,OAAO,QAAQ,kBAAkB,EAAE,QAAQ,GACtDE,EAAkBC,EAAYN,CAAG,EACjCO,EAAMF,EAAgB,UAAUG,GAAWA,EAAQ,KAAOJ,CAAM,EACtEC,EAAgBE,GAAK,UAAY,EAEjC,GAAG,YAAcF,EAAgBE,GAAK,SAEtCE,EAAYT,EAAKK,CAAe,CAClC,CAsBA,MAAMI,EAAc,CAACC,EAAKC,IAAU,CAClC,GAAI,CACF,MAAMC,EAAkB,KAAK,UAAUD,CAAK,EAC5C,aAAa,QAAQD,EAAKE,CAAe,CAC1C,OAAQC,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CACjD,CACH,EAEaP,EAAcI,GAAO,CAChC,GAAI,CACF,MAAME,EAAkB,aAAa,QAAQF,CAAG,EAChD,OAAOE,IAAoB,KAAO,OAAY,KAAK,MAAMA,CAAe,CACzE,OAAQC,EAAP,CACA,QAAQ,MAAM,oBAAqBA,EAAM,OAAO,CACjD,CACH,EAEA,SAASC,GAAgB,CACvB,MAAMC,EAAU,SAAS,cAAc,kBAAkB,EAEpDT,EAAYN,CAAG,EAGlBe,EAAQ,YAAc,SAAST,EAAYN,CAAG,EAAE,UAFhDe,EAAQ,YAAc,SAAS,IAInC,CAGA,OAAO,iBAAiB,OAAQD,CAAa"}