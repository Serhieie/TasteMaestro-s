{"version":3,"file":"commonHelpers.js","sources":["../src/js/cart-page-js/cart-js.js","../src/js/cart-page-js/cart-order-list.js"],"sourcesContent":["const KEY = 'cartItems';\n\nconst cartConteiner = document.querySelector('.js-cart');\n// cartConteiner.addEventListener('click', handlerClickPlus);\n\nfunction handlerClickPlus(e) {\n  const button = e.target.closest('.item-plus');\n  if (!button) {\n    return;\n  }\n  // <li class=\"cart-order-item\" data-id=\"id_product\"></li>\n  const itemId = e.target.closest('.cart-order-item').dataset.id;\n  const updateCartItems = loadStorage(KEY);\n  const idx = updateCartItems.findIndex(element => element.id === itemId);\n  updateCartItems[idx].quantity += 1;\n  //шлях до спану\n  el.textContent = updateCartItems[idx].quantity;\n  //змінити контент елемента відображення к-ті товару\n  saveStorage(KEY, updateCartItems);\n}\n\nfunction handlerClickMinus(e) {\n  const button = e.target.closest('.item-minus');\n  if (!button) {\n    return;\n  }\n  // <li class=\"cart-order-item\" data-id=\"id_product\"></li>\n  const itemId = e.target.closest('.cart-order-item').dataset.id;\n  const updateCartItems = loadStorage(KEY);\n  const idx = updateCartItems.findIndex(element => element.id === itemId);\n  if (updateCartItems[idx].quantity === 0) {\n    return;\n  } else {\n    updateCartItems[idx].quantity -= 1;\n    //шлях до спану\n    el.textContent = updateCartItems[idx].quantity;\n  }\n  //змінити контент елемента відображення к-ті товару\n  saveStorage(KEY, updateCartItems);\n}\n\nconst saveStorage = (key, value) => {\n  try {\n    const serializedState = JSON.stringify(value);\n    localStorage.setItem(key, serializedState);\n  } catch (error) {\n    console.error('Set state error: ', error.message);\n  }\n};\n\nexport const loadStorage = key => {\n  try {\n    const serializedState = localStorage.getItem(key);\n    return serializedState === null ? undefined : JSON.parse(serializedState);\n  } catch (error) {\n    console.error('Get state error: ', error.message);\n  }\n};\n\nfunction changeCounter() {\n  const counter = document.querySelector('.header__js_span');\n\n  if (!loadStorage(KEY)) {\n    counter.textContent = `CART (${0})`;\n  } else {\n    counter.textContent = `CART (${loadStorage(KEY).length})`;\n  }\n}\n\n//зміна к-ті продуктів в хідері при завантаженні вікна\nwindow.addEventListener('load', changeCounter);\n","const orderList = document.querySelector('.cart-order-list'),\n      cartListSection = document.querySelector('.cart-filled-list'),\n      cartEmptySection = document.querySelector('.cart-empty'),\n      clearCartBtn = document.querySelector('.cart-clear-btn'),\n      cartCount = document.querySelector('.cart-count'),\n      cartTotalRight = document.querySelector('.cart_total_order');\n\nlet cart = JSON.parse(localStorage.getItem('cartItems')) || [];\n\nlet totalPriceCart = 0;\n\nfunction handleCartClick(e) {\n  const target = e.target;\n  if (target.classList.contains('cart-order-decr')) {\n    handleDecrCount(target);\n  } else if (target.classList.contains('cart-order-incr')) {\n    handleIncrCount(target);\n  } else if (target.classList.contains('cart-remove-btn')) {\n    handleRemoveItem(target);\n  }\n}\n\nfunction cartOrder(cart) {\n  return cart\n    .map(\n      item => `\n  <li class=\"cart-order-item\">\n    <div class=\"cart-item-content\">\n      <div class=\"cart-order-img-cont\">\n        <img\n          class=\"cart-order-img\"\n          src=\"${item.img}\"\n          alt=\"${item.imgDsc}\"\n        />\n      </div>\n      <div class=\"cart-order-desc\">\n        <div class=\"cart-order-title-btn\">\n          <h3 class=\"cart-order-title\">${item.title}</h3>\n          <button class=\"cart-remove-btn\" type=\"button\">\n            <span class=\"cart-remove-span\">\n              <svg class=\"cart-remove-icon\" width=\"18\" height=\"18\">\n                <use\n                  class=\"cart-remove-svg\"\n                  xlink:href=\"./img/sprite.svg#close-cross\"\n                ></use>\n              </svg>\n            </span>\n          </button>\n        </div>\n        <p class=\"cart-order-text\">\n          <span class=\"cart-order-span\">Category:</span>${item.category}\n          <span class=\"cart-order-span cart-gap\">Size:</span>\n          ${item.size}\n        </p>\n        <div class=\"cart-order-total-price\">\n          <span class=\"cart-order-price\">$${(parseFloat(item.price.replace('$', '')) * item.quantity).toFixed(2)}</span>\n          <div class=\"cart-order-amount\">\n            <button class=\"cart-order-decr\" type=\"button\">-</button>\n            <span class=\"cart-order-quantity\">${item.quantity}</span>\n            <button class=\"cart-order-incr\" type=\"button\">+</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </li>\n  `\n    )\n    .join('');\n}\n\n\nfunction renderCartItem() {\n  if (cart.length) {\n    orderList.innerHTML = cartOrder(cart);\n  } else {\n    cartEmptySection.classList.remove('visually-hidden');\n    cartTotalRight.classList.add('visually-hidden');\n    cartListSection.classList.add('visually-hidden');\n  }\n\n}\n\nfunction handleDecrCount(target) {\n  const cartItem = target.closest('.cart-order-item');\n  const index = Array.from(orderList.children).indexOf(cartItem);\n\n  if (cart[index].quantity > 1) {\n    cart[index].quantity -= 1;\n    updateCartItem(cartItem, cart[index]);\n  }\n\n}\n\nfunction handleIncrCount(target) {\n  const cartItem = target.closest('.cart-order-item');\n  const index = Array.from(orderList.children).indexOf(cartItem);\n\n  cart[index].quantity += 1;\n  updateCartItem(cartItem, cart[index]);\n}\n\nfunction handleRemoveItem(e) {\n  const cartItem = e.target.closest('.cart-order-item');\n  if (cartItem) {\n    const index = Array.from(orderList.children).indexOf(cartItem);\n\n    const removedItem = cart.splice(index, 1)[0];\n    updateLocalStorage();\n\n    cartItem.remove();\n    updateTotalPrice();\n    renderCartItem();\n    changeListLength();\n  }\n}\n\norderList.addEventListener('click', (e) => {\n  if (e.target.closest('.cart-remove-btn')) {\n    handleRemoveItem(e);\n  }\n});\n\nconst counter = document.querySelector('.header__js_span');\n\nfunction handleClearCart() {\n  cart = [];\n  orderList.innerHTML = '';\n  updateTotalPrice();\n  updateLocalStorage();\n  renderCartItem();\n  changeListLength();\n  counter.textContent = `CART (${0})`;\n}\n\nfunction updateCartItem(cartItem, item) {\n  const totalPriceElement = cartItem.querySelector('.cart-order-price');\n  const quantityElement = cartItem.querySelector('.cart-order-quantity');\n\n  const numericPrice = parseFloat(item.price.replace('$', ''));\n\n  totalPriceElement.textContent = `$${(numericPrice * item.quantity).toFixed(2)}`;\n  quantityElement.textContent = item.quantity;\n\n  updateTotalPrice();\n  updateLocalStorage();\n}\n\nfunction updateTotalPrice() {\n  const total = cart.reduce((sum, item) => sum + (parseFloat(item.price.replace('$', '')) * item.quantity), 0);\n  totalPriceCart = Number(total.toFixed(2));\n}\n\nfunction updateLocalStorage() {\n  localStorage.setItem('cartItems', JSON.stringify(cart));\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  renderCartItem();\n  updateTotalPrice();\n  changeListLength();\n\n  orderList.addEventListener('click', handleCartClick);\n  clearCartBtn.addEventListener('click', handleClearCart);\n});\n\nfunction changeListLength() {\n\n  if (!cart.length) {\n    cartCount.textContent = `Cart (${0})`;\n  } else {\n    cartCount.textContent = `Cart (${cart.length})`;\n  }\n}\n\n"],"names":["KEY","loadStorage","key","serializedState","error","changeCounter","counter","orderList","cartListSection","cartEmptySection","clearCartBtn","cartCount","cartTotalRight","cart","handleCartClick","target","handleDecrCount","handleIncrCount","handleRemoveItem","cartOrder","item","renderCartItem","cartItem","index","updateCartItem","updateLocalStorage","updateTotalPrice","changeListLength","handleClearCart","totalPriceElement","quantityElement","numericPrice","total","sum"],"mappings":"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"}